image: alpine/edge
packages:
  - unzip
sources:
  - https://git.sr.ht/~jordanreger/htmlsky#ts
environment:
  DENO_INSTALL: /home/build/.deno
  PATH: $DENO_INSTALL/bin:$PATH
tasks:
  - install-deno: |
      curl -fsSL https://deno.land/x/install/install.sh | sh
      export DENO_INSTALL="/home/build/.deno"
      export PATH="$DENO_INSTALL/bin:$PATH"
  - install-deployctl: |
      deno install -Arf jsr:@deno/deployctl
  - deploy: |
      cd htmlsky
      deployctl deploy
