{{define "post"}}
<article>
  <div>
    <img src="{{.Post.Author.Avatar}}" alt="{{.Post.Author.DisplayName}}'s avatar"
      style="width:50px;border-radius:50%;float:left;margin-right:10px;padding:0;">
    <a href="/profile/{{.Post.Author.Handle}}" style="color:inherit;text-decoration:none;">
      <h1 style="margin-bottom:0;margin-top:10px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">
        {{.Post.Author.DisplayName}}</h1>
      <p style="margin-top:0;" class="handle">@{{.Post.Author.Handle}}</p>
    </a>
  </div>
  <p style="clear:both;">
    {{.Post.Record.HTML}}
  </p>
  <section>
    {{template "image_embed" .}}
    {{template "post_embed" .}}
    {{template "external_embed" .}}
  </section>
  <time datetime="{{.Post.Record.CreatedAt}}" class="date">{{.Post.Record.CreatedAt.Format "Jan 02, 2006 at 15:04 UTC"
    }}</time>

  <p class="counts">
    <b>{{.Post.ReplyCount}}</b> replies &middot; <b>{{.Post.RepostCount}}</b> reposts &middot;
    <b>{{.Post.LikeCount}}</b> likes
  </p>

  <hr>
</article>
{{end}}

{{define "post_reply"}}
<article>
  <div>
    <a href="/profile/{{.Post.Author.Handle}}/post/{{.Post.RKey}}" style="color:inherit;text-decoration:none;">
      <img src="{{.Post.Author.Avatar}}" alt="{{.Post.Author.DisplayName}}'s avatar"
        style="width:50px;border-radius:50%;float:left;margin-right:10px;padding:0;">
      <p style="margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">
        <b>{{.Post.Author.DisplayName}}</b>
        <span class="handle">@{{.Post.Author.Handle}}</span>
        &middot;
        <time datetime="{{.Post.Record.CreatedAt}}" style="margin-top: 10px;"
          class="date">{{.Post.Record.CreatedAt.Format "1/2/2006 15:04 UTC" }}</time>
      </p>
  </div>
  <div style="margin-left:60px;">
    <p style="margin-top:5px;">{{.Post.Record.HTML}}</p>
    <section>
      {{template "image_embed" .}}
      {{template "post_embed" .}}
      {{template "external_embed" .}}
    </section>
    <p style="margin-bottom:5px;" class="counts">
      <a href="#replies" style="color:inherit;text-decoration:none;"><b>{{.Post.ReplyCount}}</b> replies</a> &middot;
      <b>{{.Post.RepostCount}}</b> reposts &middot; <b>{{.Post.LikeCount}}</b> likes
    </p>
  </div>
  </a>
  <hr>
</article>
{{end}}

{{define "feed_post"}}
<article>
  <a href="/profile/{{.Post.Author.Handle}}/post/{{.Post.RKey}}" style="color:inherit;text-decoration:none;">
    <div>
      <img src="{{.Post.Author.Avatar}}" alt="{{.Post.Author.DisplayName}}'s avatar"
        style="width:50px;border-radius:50%;float:left;margin-right:10px;padding:0;">
      <p style="margin:0;">
        <b>{{.Post.Author.DisplayName}}</b>
        <span class="handle">@{{.Post.Author.Handle}}</span>
        &middot;
        <time datetime="{{.Post.Record.CreatedAt}}" style="margin-top: 10px;"
          class="date">{{.Post.Record.CreatedAt.Format "1/2/2006 15:04 UTC" }}</time>
      </p>
    </div>
    <div style="margin-left:60px;">
      <p style="margin-top:5px;">{{.Post.Record.HTML}}</p>
      <section>
        {{template "image_embed" .}}
        {{template "post_embed" .}}
        {{template "external_embed" .}}
      </section>
      <p class="counts">
        <b>{{.Post.ReplyCount}}</b> replies &middot; <b>{{.Post.RepostCount}}</b> reposts &middot;
        <b>{{.Post.LikeCount}}</b> likes
      </p>
    </div>
  </a>
  <hr>
</article>
{{end}}
